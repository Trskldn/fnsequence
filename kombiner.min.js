!function(e,n){if("function"==typeof define&&define.amd)define(["promise"],n);else if("object"==typeof exports){var i=require("promise");module.exports=n(i)}else e.BackboneMultiExtend=n(e.Promise)}(this,function(e){return function(){var n,i=[].slice.call(arguments),r={};return n=1==i.length?Array.isArray(i[0])?i[0]:[i[0]]:i,function(){var i=[].slice.call(arguments).concat([r]);return new e(function(r,t){function o(n,i){var c=n.shift(),f=(Array.isArray(c)?c:[c]).map(function(e){return e.apply(e,i)});e.all(f).then(function(e){n.length>0?o(n,i):r(e)},function(e){t(e)})}o(n.slice(),i)})}}});